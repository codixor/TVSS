/*

 FullCalendar v1.5.3
 http://arshaw.com/fullcalendar/

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2011 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Mon Feb 6 22:40:40 2012 -0800

*/

;(function(h,y){function Qa(a){h.extend(!0,ta,a)}function ob(a,c,b){function d(){setTimeout(function(){!p.start&&0!==h("body")[0].offsetWidth&&n()},0)}function e(a){if(!p||a!=p.name){A++;l();var b=p,c;b?((b.beforeHide||Ra)(),ua(w,w.height()),b.element.hide()):ua(w,1);w.css("overflow","hidden");(p=R[a])?p.element.show():p=R[a]=new W[a](c=X=h("<div class='fc-view fc-view-"+a+"' style='position:absolute'/>").appendTo(w),q);b&&k.deactivateButton(b.name);k.activateButton(a);n();w.css("overflow","");b&& ua(w,1);c||(p.afterShow||Ra)();A--}}function n(b){if(0!==r.offsetWidth){A++;l();aa===y&&g();var w=!1;!p.start||b||x<p.start||x>=p.end?(p.render(x,b||0),s(!0),w=!0):p.sizeDirty?(p.clearEvents(),s(),w=!0):p.eventsDirty&&(p.clearEvents(),w=!0);p.sizeDirty=!1;p.eventsDirty=!1;b=w;!c.lazyFetching||I(p.visStart,p.visEnd)?i():b&&v();T=a.outerWidth();k.updateTitle(p.title);b=new Date;b>=p.start&&b<p.end?k.disableButton("today"):k.enableButton("today");A--;p.trigger("viewDisplay",r)}}function j(){f();0!== r.offsetWidth&&(g(),s(),l(),p.clearEvents(),p.renderEvents(E),p.sizeDirty=!1)}function f(){h.each(R,function(a,b){b.sizeDirty=!0})}function g(){aa=c.contentHeight?c.contentHeight:c.height?c.height-(J?J.height():0)-oa(w):Math.round(w.width()/Math.max(c.aspectRatio,0.5))}function s(a){A++;p.setHeight(aa,a);X&&(X.css("position","relative"),X=null);p.setWidth(w.width(),a);A--}function m(){if(!A)if(p.start){var b=++S;setTimeout(function(){if(b==S&&(!A&&0!==r.offsetWidth)&&T!=(T=a.outerWidth()))A++,j(), p.trigger("windowResize",r),A--},200)}else d()}function i(){o(p.visStart,p.visEnd)}function v(a){V();0!==r.offsetWidth&&(p.clearEvents(),p.renderEvents(E,a),p.eventsDirty=!1)}function V(){h.each(R,function(a,b){b.eventsDirty=!0})}function l(){p&&p.unselect()}var q=this;q.options=c;q.render=function(b){w?(g(),f(),V(),n(b)):(a.addClass("fc"),c.isRTL&&a.addClass("fc-rtl"),c.theme&&a.addClass("ui-widget"),w=h("<div class='fc-content' style='position:relative'/>").prependTo(a),k=new pb(q,c),(J=k.render())&& a.prepend(J),e(c.defaultView),h(window).resize(m),0!==h("body")[0].offsetWidth||d())};q.destroy=function(){h(window).unbind("resize",m);k.destroy();w.remove();a.removeClass("fc fc-rtl ui-widget")};q.refetchEvents=i;q.reportEvents=function(a){E=a;v()};q.reportEventChange=function(a){v(a)};q.rerenderEvents=v;q.changeView=e;q.select=function(a,b,c){p.select(a,b,c===y?!0:c)};q.unselect=l;q.prev=function(){n(-1)};q.next=function(){n(1)};q.prevYear=function(){za(x,-1);n()};q.nextYear=function(){za(x,1); n()};q.today=function(){x=new Date;n()};q.gotoDate=function(a,b,c){a instanceof Date?x=t(a):Sa(x,a,b,c);n()};q.incrementDate=function(a,b,c){a!==y&&za(x,a);b!==y&&Aa(x,b);c!==y&&u(x,c);n()};q.formatDate=function(a,b){return ba(a,b,c)};q.formatDates=function(a,b,w){return Ba(a,b,w,c)};q.getDate=function(){return t(x)};q.getView=function(){return p};q.option=function(a,b){if(b===y)return c[a];if("height"==a||"contentHeight"==a||"aspectRatio"==a)c[a]=b,j()};q.trigger=function(a,b){if(c[a])return c[a].apply(b|| r,Array.prototype.slice.call(arguments,2))};qb.call(q,c,b);var I=q.isFetchNeeded,o=q.fetchEvents,r=a[0],k,J,w,p,R={},T,aa,X,S=0,A=0,x=new Date,E=[],D;Sa(x,c.year,c.month,c.date);c.droppable&&h(document).bind("dragstart",function(a,b){var w=a.target,e=h(w);if(!e.parents(".fc").length){var d=c.dropAccept;if(h.isFunction(d)?d.call(w,e):e.is(d))D=w,p.dragStart(D,a,b)}}).bind("dragstop",function(a,b){D&&(p.dragStop(D,a,b),D=null)})}function pb(a,c){function b(b){var d=h("<div class='fc-header-"+b+"'/>"); (b=c.header[b])&&h.each(b.split(" "),function(b){0<b&&d.append("<span class='fc-header-space'/>");var g;h.each(this.split(","),function(b,f){if("title"==f)d.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),g&&g.addClass(e+"-corner-right"),g=null;else{var n;a[f]?n=a[f]:W[f]&&(n=function(){a.changeView(f)});if(n){var t=c.theme?Ca(c.buttonIcons,f):null,u=Ca(c.buttonText,f),l=h("<span class='fc-btn fc-button-"+f+"'>"+(t?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+t+"'/></span>": u)+"</span>");l&&(l.click(function(){l.hasClass(e+"-state-disabled")||n()}).mousedown(function(){l.not("."+e+"-state-active").not("."+e+"-state-disabled").addClass(e+"-state-down")}).mouseup(function(){l.removeClass(e+"-state-down")}).hover(function(){l.not("."+e+"-state-active").not("."+e+"-state-disabled").addClass(e+"-state-hover")},function(){l.removeClass(e+"-state-hover").removeClass(e+"-state-down")}).appendTo(d),g||l.addClass(e+"-corner-left"),g=l)}}});g&&g.addClass(e+"-corner-right")});return d} this.render=function(){e=c.theme?"ui":"fc";if(c.header)return d=h("<div class='fc-header' style='width:100%'/>").append(h("<div/>").append(b("left")).append(b("center")).append(b("right")))};this.destroy=function(){d.remove()};this.updateTitle=function(a){d.find("h2").html(a)};this.activateButton=function(a){d.find("span.fc-button-"+a).addClass(e+"-state-active")};this.deactivateButton=function(a){d.find("span.fc-button-"+a).removeClass(e+"-state-active")};this.disableButton=function(a){d.find("span.fc-button-"+ a).addClass(e+"-state-disabled")};this.enableButton=function(a){d.find("span.fc-button-"+a).removeClass(e+"-state-disabled")};var d=h([]),e}function qb(a,c){function b(a,b){d(a,function(c){if(b==I){if(c){for(var d=0;d<c.length;d++)c[d].source=a,f(c[d]);k=k.concat(c)}o--;o||i(k)}})}function d(b,c){var e,f=G.sourceFetchers,g;for(e=0;e<f.length;e++){g=f[e](b,l,q,c);if(!0===g)return;if("object"==typeof g){d(g,c);return}}if(e=b.events)h.isFunction(e)?(n(),e(t(l),t(q),function(a){c(a);j()})):h.isArray(e)? c(e):c();else if(b.url){var i=b.success,r=b.error,s=b.complete;e=h.extend({},b.data||{});f=pa(b.startParam,a.startParam);g=pa(b.endParam,a.endParam);f&&(e[f]=Math.round(+l/1E3));g&&(e[g]=Math.round(+q/1E3));n();h.ajax(h.extend({},rb,b,{data:e,success:function(a){var a=a||[],b=va(i,this,arguments);h.isArray(b)&&(a=b);c(a)},error:function(){va(r,this,arguments);c()},complete:function(){va(s,this,arguments);j()}}))}else c()}function e(a){h.isFunction(a)||h.isArray(a)?a={events:a}:"string"==typeof a&& (a={url:a});if("object"==typeof a){var b=a;b.className?"string"==typeof b.className&&(b.className=b.className.split(/\s+/)):b.className=[];for(var c=G.sourceNormalizers,e=0;e<c.length;e++)c[e](b);u.push(a);return a}}function n(){r++||s("loading",null,!0)}function j(){--r||s("loading",null,!1)}function f(b){var c=b.source||{},e=pa(c.ignoreTimezone,a.ignoreTimezone);b._id=b._id||(b.id===y?"_fc"+sb++:b.id+"");b.date&&(b.start||(b.start=b.date),delete b.date);b._start=t(b.start=Da(b.start,e));b.end=Da(b.end, e);b.end&&b.end<=b.start&&(b.end=null);b._end=b.end?t(b.end):null;b.allDay===y&&(b.allDay=pa(c.allDayDefault,a.allDayDefault));b.className?"string"==typeof b.className&&(b.className=b.className.split(/\s+/)):b.className=[]}function g(a){return("object"==typeof a?a.events||a.url:"")||a}this.isFetchNeeded=function(a,b){return!l||a<l||b>q};this.fetchEvents=function(a,c){l=a;q=c;k=[];var e=++I,d=u.length;o=d;for(var f=0;f<d;f++)b(u[f],e)};this.addEventSource=function(a){if(a=e(a))o++,b(a,I)};this.removeEventSource= function(a){u=h.grep(u,function(b){return!(b&&a&&g(b)==g(a))});k=h.grep(k,function(b){return!(b.source&&a&&g(b.source)==g(a))});i(k)};this.updateEvent=function(a){var b,c=k.length,e,d=m().defaultEventEnd,g=a.start-a._start,j=a.end?a.end-(a._end||d(a)):0;for(b=0;b<c;b++)e=k[b],e._id==a._id&&e!=a&&(e.start=new Date(+e.start+g),e.end=a.end?e.end?new Date(+e.end+j):new Date(+d(e)+j):null,e.title=a.title,e.url=a.url,e.allDay=a.allDay,e.className=a.className,e.editable=a.editable,e.color=a.color,e.backgroudColor= a.backgroudColor,e.borderColor=a.borderColor,e.textColor=a.textColor,f(e));f(a);i(k)};this.renderEvent=function(a,b){f(a);a.source||(b&&(v.events.push(a),a.source=v),k.push(a));i(k)};this.removeEvents=function(a){if(a){if(!h.isFunction(a))var b=a+"",a=function(a){return a._id==b};k=h.grep(k,a,!0);for(c=0;c<u.length;c++)h.isArray(u[c].events)&&(u[c].events=h.grep(u[c].events,a,!0))}else{k=[];for(var c=0;c<u.length;c++)h.isArray(u[c].events)&&(u[c].events=[])}i(k)};this.clientEvents=function(a){return h.isFunction(a)? h.grep(k,a):a?(a+="",h.grep(k,function(b){return b._id==a})):k};this.normalizeEvent=f;for(var s=this.trigger,m=this.getView,i=this.reportEvents,v={events:[]},u=[v],l,q,I=0,o=0,r=0,k=[],J=0;J<c.length;J++)e(c[J])}function za(a,c,b){a.setFullYear(a.getFullYear()+c);b||ga(a);return a}function Aa(a,c,b){if(+a){var c=a.getMonth()+c,d=t(a);d.setDate(1);d.setMonth(c);a.setMonth(c);for(b||ga(a);a.getMonth()!=d.getMonth();)a.setDate(a.getDate()+(a<d?1:-1))}return a}function u(a,c,b){if(+a){var c=a.getDate()+ c,d=t(a);d.setHours(9);d.setDate(c);a.setDate(c);b||ga(a);Ea(a,d)}return a}function Ea(a,c){if(+a)for(;a.getDate()!=c.getDate();)a.setTime(+a+(a<c?1:-1)*tb)}function H(a,c){a.setMinutes(a.getMinutes()+c);return a}function ga(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function t(a,c){return c?ga(new Date(+a)):new Date(+a)}function Ta(){var a=0,c;do c=new Date(1970,a++,1);while(c.getHours());return c}function Y(a,c,b){for(c=c||1;!a.getDay()||b&&1==a.getDay()||!b&& 6==a.getDay();)u(a,c);return a}function P(a,c){return Math.round((t(a,!0)-t(c,!0))/Ua)}function Sa(a,c,b,d){c!==y&&c!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),a.setFullYear(c));b!==y&&b!=a.getMonth()&&(a.setDate(1),a.setMonth(b));d!==y&&a.setDate(d)}function Da(a,c){if("object"==typeof a)return a;if("number"==typeof a)return new Date(1E3*a);if("string"==typeof a){if(a.match(/^\d+(\.\d+)?$/))return new Date(1E3*parseFloat(a));c===y&&(c=!0);return Va(a,c)||(a?new Date(a):null)}return null}function Va(a, c){var b=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!b)return null;var d=new Date(b[1],0,1);if(c||!b[13]){var e=new Date(b[1],0,1,9,0);b[3]&&(d.setMonth(b[3]-1),e.setMonth(b[3]-1));b[5]&&(d.setDate(b[5]),e.setDate(b[5]));Ea(d,e);b[7]&&d.setHours(b[7]);b[8]&&d.setMinutes(b[8]);b[10]&&d.setSeconds(b[10]);b[12]&&d.setMilliseconds(1E3*Number("0."+b[12]));Ea(d,e)}else d.setUTCFullYear(b[1],b[3]?b[3]- 1:0,b[5]||1),d.setUTCHours(b[7]||0,b[8]||0,b[10]||0,b[12]?1E3*Number("0."+b[12]):0),b[14]&&(e=60*Number(b[16])+(b[18]?Number(b[18]):0),e*="-"==b[15]?1:-1,d=new Date(+d+6E4*e));return d}function Fa(a){if("number"==typeof a)return 60*a;if("object"==typeof a)return 60*a.getHours()+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var c=parseInt(a[1],10);a[3]&&(c%=12,"p"==a[3].toLowerCase().charAt(0)&&(c+=12));return 60*c+(a[2]?parseInt(a[2],10):0)}}function ba(a,c,b){return Ba(a,null,c,b)}function Ba(a, c,b,d){var d=d||ta,e=a,n=c,j,f=b.length,g,h,m,i="";for(j=0;j<f;j++)if(g=b.charAt(j),"'"==g)for(h=j+1;h<f;h++){if("'"==b.charAt(h)){e&&(i=h==j+1?i+"'":i+b.substring(j+1,h),j=h);break}}else if("("==g)for(h=j+1;h<f;h++){if(")"==b.charAt(h)){j=ba(e,b.substring(j+1,h),d);parseInt(j.replace(/\D/,""),10)&&(i+=j);j=h;break}}else if("["==g)for(h=j+1;h<f;h++){if("]"==b.charAt(h)){g=b.substring(j+1,h);j=ba(e,g,d);j!=ba(n,g,d)&&(i+=j);j=h;break}}else if("{"==g)e=c,n=a;else if("}"==g)e=a,n=c;else{for(h=f;h>j;h--)if(m= ub[b.substring(j,h)]){e&&(i+=m(e,d));j=h-1;break}h==j&&e&&(i+=g)}return i}function qa(a){if(a.end){var c=a.end,a=a.allDay,c=t(c);return a||c.getHours()||c.getMinutes()?u(c,1):ga(c)}return u(t(a.start),1)}function vb(a,c){return 100*(c.msLength-a.msLength)+(a.event.start-c.event.start)}function Ga(a,c,b,d){var e=[],h,j=a.length,f,g,s,m,i;for(h=0;h<j;h++)if(f=a[h],g=f.start,s=c[h],s>b&&g<d)g<b?(g=t(b),m=!1):m=!0,s>d?(s=t(d),i=!1):i=!0,e.push({event:f,start:g,end:s,isStart:m,isEnd:i,msLength:s-g});return e.sort(vb)} function Ha(a){var c=[],b,d=a.length,e,h,j,f;for(b=0;b<d;b++){e=a[b];for(h=0;;){j=!1;if(c[h])for(f=0;f<c[h].length;f++)if(c[h][f].end>e.start&&c[h][f].start<e.end){j=!0;break}if(j)h++;else break}c[h]?c[h].push(e):c[h]=[e]}return c}function Wa(a,c,b){a.unbind("mouseover").mouseover(function(a){for(var e=a.target,n;e!=this;)n=e,e=e.parentNode;if((e=n._fci)!==y)n._fci=y,n=c[e],b(n.event,n.element,n),h(a.target).trigger(a);a.stopPropagation()})}function ra(a,c,b){for(var d=0,e;d<a.length;d++)e=h(a[d]), e.width(Math.max(0,c-(Ia(e)+Ja(e)+(b?Ka(e):0))))}function Xa(a,c,b){for(var d=0,e;d<a.length;d++)e=h(a[d]),e.height(Math.max(0,c-oa(e,b)))}function Ia(a){return(parseFloat(h.curCSS(a[0],"paddingLeft",!0))||0)+(parseFloat(h.curCSS(a[0],"paddingRight",!0))||0)}function Ka(a){return(parseFloat(h.curCSS(a[0],"marginLeft",!0))||0)+(parseFloat(h.curCSS(a[0],"marginRight",!0))||0)}function Ja(a){return(parseFloat(h.curCSS(a[0],"borderLeftWidth",!0))||0)+(parseFloat(h.curCSS(a[0],"borderRightWidth",!0))|| 0)}function oa(a,c){return(parseFloat(h.curCSS(a[0],"paddingTop",!0))||0)+(parseFloat(h.curCSS(a[0],"paddingBottom",!0))||0)+((parseFloat(h.curCSS(a[0],"borderTopWidth",!0))||0)+(parseFloat(h.curCSS(a[0],"borderBottomWidth",!0))||0))+(c?Ya(a):0)}function Ya(a){return(parseFloat(h.curCSS(a[0],"marginTop",!0))||0)+(parseFloat(h.curCSS(a[0],"marginBottom",!0))||0)}function ua(a,c){c="number"==typeof c?c+"px":c;a.each(function(a,d){d.style.cssText+=";min-height:"+c+";_height:"+c})}function Ra(){}function Za(a, c){return a-c}function O(a){return(10>a?"0":"")+a}function Ca(a,c){if(a[c]!==y)return a[c];for(var b=c.split(/(?=[A-Z])/),d=b.length-1,e;0<=d;d--)if(e=a[b[d].toLowerCase()],e!==y)return e;return a[""]}function ca(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function $a(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function La(a){a.attr("unselectable", "on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function wa(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function Ma(a,c){a.each(function(a,d){d.className=d.className.replace(/^fc-\w*/,"fc-"+wb[c.getDay()])})}function ab(a,c){var b=a.source||{},d=a.color,e=b.color,h=c("eventColor"),j=a.backgroundColor||d||b.backgroundColor||e||c("eventBackgroundColor")||h,d=a.borderColor||d|| b.borderColor||e||c("eventBorderColor")||h,b=a.textColor||b.textColor||c("eventTextColor"),e=[];j&&e.push("background-color:"+j);d&&e.push("border-color:"+d);b&&e.push("color:"+b);return e.join(";")}function va(a,c,b){h.isFunction(a)&&(a=[a]);if(a){var d,e;for(d=0;d<a.length;d++)e=a[d].apply(c,b)||e;return e}}function pa(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==y)return arguments[a]}function Na(a,c,b){function d(a){var b=a||1==E,c=i.start.getMonth(),e=ga(new Date),d,f,g;b&&J.each(function(a, b){d=h(b);f=s(a);d.html(r(f,Q));Ma(d,f)});R.each(function(a,g){d=h(g);f=s(a);f.getMonth()==c?d.removeClass("fc-other-month"):d.addClass("fc-other-month");+f==+e?d.addClass(z+"-state-highlight fc-today"):d.removeClass(z+"-state-highlight fc-today");d.find("div.fc-day-number").text(f.getDate());b&&Ma(d,f)});p.each(function(a,b){g=h(b);a<E?(g.show(),a==E-1?g.addClass("fc-last"):g.removeClass("fc-last")):g.hide()})}function e(a){if(!v("selectable")){var b=parseInt(this.className.match(/fc\-day(\d+)/)[1]), b=s(b);y("dayClick",this,b,!0,a)}}function n(a,b,c){c&&N.build();for(var c=t(i.visStart),d=u(t(c),D),f=0;f<E;f++){var h=new Date(Math.max(c,a)),g=new Date(Math.min(d,b));if(h<g){var Q;M?(Q=P(g,c)*C+K+1,h=P(h,c)*C+K+1):(Q=P(h,c),h=P(g,c));j(f,Q,f,h-1).click(e).mousedown(o)}u(c,7);u(d,7)}}function j(b,c,e,d){b=N.rect(b,c,e,d,a);return q(b,a)}function f(a){return{row:Math.floor(P(a,i.visStart)/7),col:m(a.getDay())}}function g(a){return u(t(i.visStart),7*a.row+a.col*C+K)}function s(a){return u(t(i.visStart), 7*Math.floor(a/D)+a%D*C+K)}function m(a){return(a-Math.max(F,da)+D)%D*C+K}var i=this;i.renderBasic=function(b,c,f,g){E=c;D=f;(M=v("isRTL"))?(C=-1,K=D-1):(C=1,K=0);F=v("firstDay");da=v("weekends")?0:1;z=v("theme")?"ui":"fc";Q=v("columnFormat");if(c=!w){var j=z+"-widget-header",i=z+"-widget-content",r,f="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";for(r=0;r<D;r++)f+="<th class='fc- "+j+"'/>";f+="</tr></thead><tbody>";for(r=0;r<b;r++){f+="<tr class='fc-week"+r+"'>"; for(j=0;j<D;j++)f+="<td class='fc- "+i+" fc-day"+(r*D+j)+"'><div>"+(g?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";f+="</tr>"}b=h(f+"</tbody></table>").appendTo(a);k=b.find("thead");J=k.find("th");w=b.find("tbody");p=w.find("tr");R=w.find("td");T=R.filter(":first-child");aa=p.eq(0).find("div.fc-day-content div");wa(k.add(k.find("tr")));wa(p);p.eq(0).addClass("fc-first");R.click(e).mousedown(o);X=h("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}else l(); d(c)};i.setHeight=function(a){A=a;var a=A-k.height(),b,c,e;"variable"==v("weekMode")?b=c=Math.floor(a/(1==E?2:6)):(b=Math.floor(a/E),c=a-b*(E-1));T.each(function(a,d){if(a<E){e=h(d);ua(e.find("> div"),(a==E-1?c:b)-oa(e))}})};i.setWidth=function(a){S=a;L.clear();x=Math.floor(S/D);ra(J.slice(0,-1),x)};i.renderDayOverlay=n;i.defaultSelectionEnd=function(a){return t(a)};i.renderSelection=function(a,b){n(a,u(t(b),1),!0)};i.clearSelection=function(){I()};i.reportDayClick=function(a,b,c){var e=f(a);y("dayClick", R[e.row*D+e.col],a,b,c)};i.dragStart=function(a,b){B.start(function(a){I();a&&j(a.row,a.col,a.row,a.col)},b)};i.dragStop=function(a,b,c){var e=B.stop();I();e&&(e=g(e),y("drop",a,e,!0,b,c))};i.defaultEventEnd=function(a){return t(a.start)};i.getHoverListener=function(){return B};i.colContentLeft=function(a){return L.left(a)};i.colContentRight=function(a){return L.right(a)};i.dayOfWeekCol=m;i.dateCell=f;i.cellDate=g;i.cellIsAllDay=function(){return!0};i.allDayRow=function(a){return p.eq(a)};i.allDayBounds= function(){return{left:0,right:S}};i.getRowCnt=function(){return E};i.getColCnt=function(){return D};i.getColWidth=function(){return x};i.getDaySegmentContainer=function(){return X};fb.call(i,a,c,b);gb.call(i);hb.call(i);xb.call(i);var v=i.opt,y=i.trigger,l=i.clearEvents,q=i.renderOverlay,I=i.clearOverlays,o=i.daySelectionMousedown,r=c.formatDate,k,J,w,p,R,T,aa,X,S,A,x,E,D,N,B,L,M,C,K,F,da,z,Q;La(a.addClass("fc-grid"));N=new ib(function(a,b){var c,e,d;J.each(function(a,f){c=h(f);e=c.offset().left; a&&(d[1]=e);d=[e];b[a]=d});d[1]=e+c.outerWidth();p.each(function(b,f){b<E&&(c=h(f),e=c.offset().top,b&&(d[1]=e),d=[e],a[b]=d)});d[1]=e+c.outerHeight()});B=new jb(N);L=new kb(function(a){return aa.eq(a)})}function xb(){function a(a){var c=o(),e=r(),d=t(b.visStart),e=u(t(d),e),f=h.map(a,qa),g,j,i,n,k,m,s=[];for(g=0;g<c;g++){j=Ha(Ga(a,f,d,e));for(i=0;i<j.length;i++){n=j[i];for(k=0;k<n.length;k++)m=n[k],m.row=g,m.level=i,s.push(m)}u(d,7);u(e,7)}return s}function c(a,b){var c=l(),f;b.draggable({zIndex:9, delay:50,opacity:d("dragOpacity"),revertDuration:d("dragRevertDuration"),start:function(g,h){e("eventDragStart",b,a,g,h);i(a,b);c.start(function(c,e,g,h){b.draggable("option","revert",!c||!g&&!h);I();c?(f=7*g+h*(d("isRTL")?-1:1),q(u(t(a.start),f),u(qa(a),f))):f=0},g,"drag")},stop:function(d,g){c.stop();I();e("eventDragStop",b,a,d,g);f?v(this,a,f,0,a.allDay,d,g):(b.css("filter",""),m(a,b))}})}var b=this;b.renderEvents=function(b,c){f(b);k(a(b),c)};b.compileDaySegs=a;b.clearEvents=function(){g();y().empty()}; b.bindDaySeg=function(a,b,e){n(a)&&c(a,b);e.isEnd&&j(a)&&J(a,b,e);s(a,b)};lb.call(b);var d=b.opt,e=b.trigger,n=b.isEventDraggable,j=b.isEventResizable,f=b.reportEvents,g=b.reportEventClear,s=b.eventElementHandlers,m=b.showEvents,i=b.hideEvents,v=b.eventDrop,y=b.getDaySegmentContainer,l=b.getHoverListener,q=b.renderDayOverlay,I=b.clearOverlays,o=b.getRowCnt,r=b.getColCnt,k=b.renderDaySegs,J=b.resizableDayEvent}function mb(a,c,b){function d(){function a(){z.scrollTop(e)}var b=Ta(),c=t(b);c.setHours(r("firstHour")); var e=v(b,c)+1;a();setTimeout(a,0)}function e(a){if(!r("selectable")){var b=Math.min(Z-1,Math.floor((a.pageX-A.offset().left-ia)/xa)),c=s(b),e=this.parentNode.className.match(/fc-slot(\d+)/);e?(e=parseInt(e[1])*r("slotMinutes"),c.setHours(Math.floor(e/60)),c.setMinutes(e%60+ja),k("dayClick",N[b],c,!1,a)):k("dayClick",N[b],c,!0,a)}}function n(a,b,c){c&&ka.build();var d=t(o.visStart);ba?(c=P(b,d)*ea+fa+1,a=P(a,d)*ea+fa+1):(c=P(a,d),a=P(b,d));c=Math.max(0,c);a=Math.min(Z,a);c<a&&j(0,c,0,a-1).click(e).mousedown(aa)} function j(a,b,c,e){a=ka.rect(a,b,c,e,C);return w(a,C)}function f(a,b){for(var c=t(o.visStart),d=u(t(c),1),f=0;f<Z;f++){var g=new Date(Math.max(c,a)),h=new Date(Math.min(d,b));if(g<h){var j=f*ea+fa,j=ka.rect(0,j,0,j,Q),g=v(c,g),h=v(c,h);j.top=g;j.height=h-g;w(j,Q).click(e).mousedown(q)}u(c,1);u(d,1)}}function g(a){var b=s(a.col),a=a.row;r("allDaySlot")&&a--;0<=a&&H(b,ja+a*r("slotMinutes"));return b}function s(a){return u(t(o.visStart),a*ea+fa)}function m(a){return r("allDaySlot")&&!a.row}function i(a){return(a- Math.max(Y,W)+Z)%Z*ea+fa}function v(a,b){a=t(a,!0);if(b<H(t(a),ja))return 0;if(b>=H(t(a),O))return ha.height();var c=r("slotMinutes"),e=60*b.getHours()+b.getMinutes()-ja,d=Math.floor(e/c),f=G[d];f===y&&(f=G[d]=ha.find("tr:eq("+d+") td div")[0].offsetTop);return Math.max(0,Math.round(f-1+sa*(e%c/c)))}function V(a,b){var c=r("selectHelper");ka.build();if(c){var d=P(a,o.visStart)*ea+fa;if(0<=d&&d<Z){var d=ka.rect(0,d,0,d,Q),g=v(a,a),j=v(a,b);if(j>g){d.top=g;d.height=j-g;d.left+=2;d.width-=5;if(h.isFunction(c)){if(c= c(a,b))d.position="absolute",d.zIndex=8,$=h(c).css(d).appendTo(Q)}else d.isStart=!0,d.isEnd=!0,$=h(X({title:"",start:a,end:b,className:["fc-select-helper"],editable:!1},d)),$.css("opacity",r("dragOpacity"));$&&($.click(e).mousedown(q),Q.append($),ra($,d.width,!0),Xa($,d.height,!0))}}}else f(a,b)}function l(){p();$&&($.remove(),$=null)}function q(a){if(1==a.which&&r("selectable")){T(a);var b;na.start(function(a,c){l();if(a&&a.col==c.col&&!m(a)){var e=g(c),d=g(a);b=[e,H(t(e),r("slotMinutes")),d,H(t(d), r("slotMinutes"))].sort(Za);V(b[0],b[3])}else b=null},a);h(document).one("mouseup",function(a){na.stop();b&&(+b[0]==+b[1]&&I(b[0],!1,a),R(b[0],b[3],!1,a))})}}function I(a,b,c){k("dayClick",N[i(a.getDay())],a,b,c)}var o=this;o.renderAgenda=function(b){Z=b;U=r("theme")?"ui":"fc";W=r("weekends")?0:1;Y=r("firstDay");(ba=r("isRTL"))?(ea=-1,fa=Z-1):(ea=1,fa=0);ja=Fa(r("minTime"));O=Fa(r("maxTime"));ca=r("columnFormat");if(A)J();else{var b=U+"-widget-header",c=U+"-widget-content",d,f,g,j,i,n=0==r("slotMinutes")% 15;d="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+b+"'>&nbsp;</th>";for(f=0;f<Z;f++)d+="<th class='fc- fc-col"+f+" "+b+"'/>";d+="<th class='fc-agenda-gutter "+b+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+b+"'>&nbsp;</th>";for(f=0;f<Z;f++)d+="<td class='fc- fc-col"+f+" "+c+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";A=h(d+("<td class='fc-agenda-gutter "+ c+"'>&nbsp;</td></tr></tbody></table>")).appendTo(a);x=A.find("thead");E=x.find("th").slice(1,-1);D=A.find("tbody");N=D.find("td").slice(0,-1);B=N.find("div.fc-day-content div");L=N.eq(0);M=L.find("> div");wa(x.add(x.find("tr")));wa(D.add(D.find("tr")));la=x.find("th:first");ma=A.find(".fc-agenda-gutter");C=h("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(a);r("allDaySlot")?(K=h("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(C),d="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+ b+" fc-agenda-axis'>"+r("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+b+" fc-agenda-gutter'>&nbsp;</th></tr></table>",F=h(d).appendTo(C),da=F.find("tr"),da.find("td").click(e).mousedown(aa),la=la.add(F.find("th:first")),ma=ma.add(F.find("th.fc-agenda-gutter")),C.append("<div class='fc-agenda-divider "+b+"'><div class='fc-agenda-divider-inner'/></div>")):K=h([]);z=h("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(C); Q=h("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(z);bb=h("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(Q);d="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";g=Ta();j=H(t(g),O);H(g,ja);for(f=Oa=0;g<j;f++)i=g.getMinutes(),d+="<tr class='fc-slot"+f+" "+(!i?"":"fc-minor")+"'><th class='fc-agenda-axis "+b+"'>"+(!n||!i?S(g,r("axisFormat")):"&nbsp;")+"</th><td class='"+c+"'><div style='position:relative'>&nbsp;</div></td></tr>", H(g,r("slotMinutes")),Oa++;ha=h(d+"</tbody></table>").appendTo(Q);cb=ha.find("div:first");ha.find("td").click(e).mousedown(q);la=la.add(ha.find("th:first"))}g=ga(new Date);for(b=0;b<Z;b++)f=s(b),c=E.eq(b),c.html(S(f,ca)),d=N.eq(b),+f==+g?d.addClass(U+"-state-highlight fc-today"):d.removeClass(U+"-state-highlight fc-today"),Ma(c.add(d),f)};o.setWidth=function(a){db=a;ya.clear();ia=0;ra(la.width("").each(function(a,b){ia=Math.max(ia,h(b).outerWidth())}),ia);a=z[0].clientWidth;(Pa=z.width()-a)?(ra(ma, Pa),ma.show().prev().removeClass("fc-last")):ma.hide().prev().addClass("fc-last");xa=Math.floor((a-ia)/Z);ra(E.slice(0,-1),xa)};o.setHeight=function(a,b){a===y&&(a=eb);eb=a;G={};var c=D.position().top,e=z.position().top,f=Math.min(a-c,ha.height()+e+1);M.height(f-oa(L));C.css("top",c);z.height(f-e-1);sa=cb.height()+1;b&&d()};o.beforeHide=function(){nb=z.scrollTop()};o.afterShow=function(){z.scrollTop(nb)};o.defaultEventEnd=function(a){var b=t(a.start);return a.allDay?b:H(b,r("defaultEventMinutes"))}; o.timePosition=v;o.dayOfWeekCol=i;o.dateCell=function(a){return{row:Math.floor(P(a,o.visStart)/7),col:i(a.getDay())}};o.cellDate=g;o.cellIsAllDay=m;o.allDayRow=function(){return da};o.allDayBounds=function(){return{left:ia,right:db-Pa}};o.getHoverListener=function(){return na};o.colContentLeft=function(a){return ya.left(a)};o.colContentRight=function(a){return ya.right(a)};o.getDaySegmentContainer=function(){return K};o.getSlotSegmentContainer=function(){return bb};o.getMinMinute=function(){return ja}; o.getMaxMinute=function(){return O};o.getBodyContent=function(){return Q};o.getRowCnt=function(){return 1};o.getColCnt=function(){return Z};o.getColWidth=function(){return xa};o.getSlotHeight=function(){return sa};o.defaultSelectionEnd=function(a,b){return b?t(a):H(t(a),r("slotMinutes"))};o.renderDayOverlay=n;o.renderSelection=function(a,b,c){c?r("allDaySlot")&&n(a,u(t(b),1),!0):V(a,b)};o.clearSelection=l;o.reportDayClick=I;o.dragStart=function(a,b){na.start(function(a){p();if(a)if(m(a))j(a.row,a.col, a.row,a.col);else{var a=g(a),b=H(t(a),r("defaultEventMinutes"));f(a,b)}},b)};o.dragStop=function(a,b,c){var e=na.stop();p();e&&k("drop",a,g(e),m(e),b,c)};fb.call(o,a,c,b);gb.call(o);hb.call(o);yb.call(o);var r=o.opt,k=o.trigger,J=o.clearEvents,w=o.renderOverlay,p=o.clearOverlays,R=o.reportSelection,T=o.unselect,aa=o.daySelectionMousedown,X=o.slotSegHtml,S=c.formatDate,A,x,E,D,N,B,L,M,C,K,F,da,z,Q,bb,ha,cb,la,ma,$,db,eb,ia,xa,Pa,sa,nb,Z,Oa,ka,na,ya,G={},U,Y,W,ba,ea,fa,ja,O,ca;La(a.addClass("fc-agenda")); ka=new ib(function(a,b){var c,e,d;E.each(function(a,f){c=h(f);e=c.offset().left;a&&(d[1]=e);d=[e];b[a]=d});d[1]=e+c.outerWidth();r("allDaySlot")&&(c=da,e=c.offset().top,a[0]=[e,e+c.outerHeight()]);for(var f=Q.offset().top,g=z.offset().top,j=g+z.outerHeight(),i=0;i<Oa;i++)a.push([Math.max(g,Math.min(j,f+sa*i)),Math.max(g,Math.min(j,f+sa*(i+1)))])});na=new jb(ka);ya=new kb(function(a){return B.eq(a)})}function yb(){function a(a){var a=Ha(Ga(a,h.map(a,qa),f.visStart,f.visEnd)),b,c=a.length,e,d,g,j=[]; for(b=0;b<c;b++){e=a[b];for(d=0;d<e.length;d++)g=e[d],g.row=0,g.level=b,j.push(g)}return j}function c(a){return a.end?t(a.end):H(t(a.start),g("defaultEventMinutes"))}function b(a,b){var c="<",e=a.url,d=ab(a,g),f=d?" style='"+d+"'":"",h=["fc-event","fc-event-skin","fc-event-vert"];m(a)&&h.push("fc-event-draggable");b.isStart&&h.push("fc-corner-top");b.isEnd&&h.push("fc-corner-bottom");h=h.concat(a.className);a.source&&(h=h.concat(a.source.className||[]));c=e?c+("a href='"+ca(a.url)+"'"):c+"div";c+= " class='"+h.join(" ")+"' style='position:absolute;z-index:8;top:"+b.top+"px;left:"+b.left+"px;"+d+"'><div class='fc-event-inner fc-event-skin'"+f+"><div class='fc-event-head fc-event-skin'"+f+"><div class='fc-event-time'>"+ca(z(a.start,a.end,g("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+ca(a.title)+"</div></div><div class='fc-event-bg'></div></div>";b.isEnd&&i(a)&&(c+="<div class='ui-resizable-handle ui-resizable-s'>=</div>");return c+("</"+(e?"a":"div")+ ">")}function d(a,b,c){var e=b.find("div.fc-event-time");m(a)&&n(a,b,e);c.isEnd&&i(a)&&j(a,b,e);q(a,b)}function e(a,b,c){function e(){h||(b.width(d).height("").draggable("option","grid",null),h=!0)}var d,f,h=!0,j,i=g("isRTL")?-1:1,r=k(),n=A(),m=x(),p=w();b.draggable({zIndex:9,opacity:g("dragOpacity","month"),revertDuration:g("dragRevertDuration"),start:function(k,p){s("eventDragStart",b,a,k,p);B(a,b);d=b.width();r.start(function(d,r,k,p){K();d?(f=!1,j=p*i,d.row?c?h&&(b.width(n-10),Xa(b,m*Math.round((a.end? (a.end-a.start)/zb:g("defaultEventMinutes"))/g("slotMinutes"))),b.draggable("option","grid",[n,1]),h=!1):f=!0:(C(u(t(a.start),j),u(qa(a),j)),e()),f=f||h&&!j):(e(),f=!0);b.draggable("option","revert",f)},k,"drag")},stop:function(c,d){r.stop();K();s("eventDragStop",b,a,c,d);if(f)e(),b.css("filter",""),N(a,b);else{var i=0;h||(i=Math.round((b.offset().top-E().offset().top)/m)*g("slotMinutes")+p-(60*a.start.getHours()+a.start.getMinutes()));L(this,a,j,i,h,c,d)}}})}function n(a,b,c){function e(b){var d= H(t(a.start),b),f;a.end&&(f=H(t(a.end),b));c.text(z(d,f,g("timeFormat")))}function d(){h&&(c.css("display",""),b.draggable("option","grid",[o,w]),h=!1)}var f,h=!1,j,i,r,n=g("isRTL")?-1:1,m=k(),p=S(),o=A(),w=x();b.draggable({zIndex:9,scroll:!1,grid:[o,w],axis:1==p?"y":!1,opacity:g("dragOpacity"),revertDuration:g("dragRevertDuration"),start:function(e,k){s("eventDragStart",b,a,e,k);B(a,b);f=b.position();i=r=0;m.start(function(e,f,i,r){b.draggable("option","revert",!e);K();e&&(j=r*n,g("allDaySlot")&& !e.row?(h||(h=!0,c.hide(),b.draggable("option","grid",null)),C(u(t(a.start),j),u(qa(a),j))):d())},e,"drag")},drag:function(a,b){i=Math.round((b.position.top-f.top)/w)*g("slotMinutes");i!=r&&(h||e(i),r=i)},stop:function(c,g){var r=m.stop();K();s("eventDragStop",b,a,c,g);r&&(j||i||h)?L(this,a,j,h?0:i,h,c,g):(d(),b.css("filter",""),b.css(f),e(0),N(a,b))}})}function j(a,b,c){var e,d,f=x();b.resizable({handles:{s:"div.ui-resizable-s"},grid:f,start:function(c,f){e=d=0;B(a,b);b.css("z-index",9);s("eventResizeStart", this,a,c,f)},resize:function(h,j){e=Math.round((Math.max(f,b.height())-j.originalSize.height)/f);e!=d&&(c.text(z(a.start,!e&&!a.end?null:H(v(a),g("slotMinutes")*e),g("timeFormat"))),d=e)},stop:function(c,d){s("eventResizeStop",this,a,c,d);e?M(this,a,0,g("slotMinutes")*e,c,d):(b.css("z-index",8),N(a,b))}})}var f=this;f.renderEvents=function(e,j){V(e);var i,n=e.length,k=[],m=[];for(i=0;i<n;i++)e[i].allDay?k.push(e[i]):m.push(e[i]);g("allDaySlot")&&(G(a(k),j),I());var n=S(),k=w(),o=J(),K=H(t(f.visStart), k),B=h.map(m,c),z,q,F,l,v,C;i=[];for(z=0;z<n;z++){F=q=Ha(Ga(m,B,K,H(t(K),o-k)));var L=C=v=l=void 0,M=void 0,x=void 0;for(l=F.length-1;0<l;l--){L=F[l];for(v=0;v<L.length;v++){M=L[v];for(C=0;C<F[l-1].length;C++)x=F[l-1][C],M.end>x.start&&M.start<x.end&&(x.forward=Math.max(x.forward||0,(M.forward||0)+1))}}for(F=0;F<q.length;F++){l=q[F];for(v=0;v<l.length;v++)C=l[v],C.col=z,C.level=F,i.push(C)}u(K,1,!0)}var m=i.length,A,E,U;q="";o={};K={};z=r();n=S();(F=g("isRTL"))?(l=-1,L=n-1):(l=1,L=0);for(n=0;n<m;n++)k= i[n],B=k.event,v=p(k.start,k.start),C=p(k.start,k.end),A=k.col,M=k.level,x=k.forward||0,E=R(A*l+L),U=T(A*l+L)-E,U=Math.min(U-6,0.95*U),A=M?U/(M+x+1):x?2*(U/(x+1)-6):U,M=E+U/(M+x+1)*M*l+(F?U-A:0),k.top=v,k.left=M,k.outerWidth=A,k.outerHeight=C-v,q+=b(B,k);z[0].innerHTML=q;F=z.children();for(n=0;n<m;n++)k=i[n],B=k.event,q=h(F[n]),l=s("eventRender",B,B,q),!1===l?q.remove():(l&&!0!==l&&(q.remove(),q=h(l).css({position:"absolute",top:k.top,left:k.left}).appendTo(z)),k.element=q,B._id===j?d(B,q,k):q[0]._fci= n,D(B,q));Wa(z,i,d);for(n=0;n<m;n++)if(k=i[n],q=k.element)z=o[B=k.key=$a(q[0])],k.vsides=z===y?o[B]=oa(q,!0):z,z=K[B],k.hsides=z===y?K[B]=Ia(q)+Ja(q)+Ka(q):z,B=q.find("div.fc-event-content"),B.length&&(k.contentTop=B[0].offsetTop);for(n=0;n<m;n++)if(k=i[n],q=k.element)q[0].style.width=Math.max(0,k.outerWidth-k.hsides)+"px",o=Math.max(0,k.outerHeight-k.vsides),q[0].style.height=o+"px",B=k.event,k.contentTop!==y&&10>o-k.contentTop&&(q.find("div.fc-event-time").text(da(B.start,g("timeFormat"))+" - "+ B.title),q.find("div.fc-event-title").remove()),s("eventAfterRender",B,B,q)};f.compileDaySegs=a;f.clearEvents=function(){l();o().empty();r().empty()};f.slotSegHtml=b;f.bindDaySeg=function(a,b,c){m(a)&&e(a,b,c.isStart);c.isEnd&&i(a)&&X(a,b,c);q(a,b)};lb.call(f);var g=f.opt,s=f.trigger,m=f.isEventDraggable,i=f.isEventResizable,v=f.eventEnd,V=f.reportEvents,l=f.reportEventClear,q=f.eventElementHandlers,I=f.setHeight,o=f.getDaySegmentContainer,r=f.getSlotSegmentContainer,k=f.getHoverListener,J=f.getMaxMinute, w=f.getMinMinute,p=f.timePosition,R=f.colContentLeft,T=f.colContentRight,G=f.renderDaySegs,X=f.resizableDayEvent,S=f.getColCnt,A=f.getColWidth,x=f.getSlotHeight,E=f.getBodyContent,D=f.reportEventElement,N=f.showEvents,B=f.hideEvents,L=f.eventDrop,M=f.eventResize,C=f.renderDayOverlay,K=f.clearOverlays,F=f.calendar,da=F.formatDate,z=F.formatDates}function fb(a,c,b){function d(a,c){var e=o[a];return"object"==typeof e?Ca(e,c||b):e}function e(a,b){return c.trigger.apply(c,[a,b||m].concat(Array.prototype.slice.call(arguments, 2),[m]))}function h(a){return pa(a.editable,(a.source||{}).editable,d("editable"))}function j(a){return a.end?t(a.end):i(a)}function f(a,b,c){var a=I[a._id],e,d=a.length;for(e=0;e<d;e++)if(!b||a[e][0]!=b[0])a[e][c]()}function g(a,b,c,e){for(var c=c||0,d,f=a.length,g=0;g<f;g++)d=a[g],e!==y&&(d.allDay=e),H(u(d.start,b,!0),c),d.end&&(d.end=H(u(d.end,b,!0),c)),v(d,o)}function s(a,b,c){for(var c=c||0,e,d=a.length,f=0;f<d;f++)e=a[f],e.end=H(u(j(e),b,!0),c),v(e,o)}var m=this;m.element=a;m.calendar=c;m.name= b;m.opt=d;m.trigger=e;m.isEventDraggable=function(a){return h(a)&&!d("disableDragging")};m.isEventResizable=function(a){return h(a)&&!d("disableResizing")};m.reportEvents=function(a){l={};var b,c=a.length,e;for(b=0;b<c;b++)e=a[b],l[e._id]?l[e._id].push(e):l[e._id]=[e]};m.eventEnd=j;m.reportEventElement=function(a,b){q.push(b);I[a._id]?I[a._id].push(b):I[a._id]=[b]};m.reportEventClear=function(){q=[];I={}};m.eventElementHandlers=function(a,b){b.click(function(c){if(!b.hasClass("ui-draggable-dragging")&& !b.hasClass("ui-resizable-resizing"))return e("eventClick",this,a,c)}).hover(function(b){e("eventMouseover",this,a,b)},function(b){e("eventMouseout",this,a,b)})};m.showEvents=function(a,b){f(a,b,"show")};m.hideEvents=function(a,b){f(a,b,"hide")};m.eventDrop=function(a,b,c,d,f,h,j){var i=b.allDay,n=b._id;g(l[n],c,d,f);e("eventDrop",a,b,c,d,f,function(){g(l[n],-c,-d,i);V(n)},h,j);V(n)};m.eventResize=function(a,b,c,d,f,g){var h=b._id;s(l[h],c,d);e("eventResize",a,b,c,d,function(){s(l[h],-c,-d);V(h)}, f,g);V(h)};var i=m.defaultEventEnd,v=c.normalizeEvent,V=c.reportEventChange,l={},q=[],I={},o=c.options}function lb(){function a(a){var b=s("isRTL"),c,e=a.length,d,f,g,h;c=w();var j=c.left,n=c.right,k,m,q,o,r,l="";for(c=0;c<e;c++)d=a[c],f=d.event,h=["fc-event","fc-event-skin","fc-event-hori"],i(f)&&h.push("fc-event-draggable"),b?(d.isStart&&h.push("fc-corner-right"),d.isEnd&&h.push("fc-corner-left"),k=G(d.end.getDay()-1),m=G(d.start.getDay()),q=d.isEnd?p(k):j,o=d.isStart?H(m):n):(d.isStart&&h.push("fc-corner-left"), d.isEnd&&h.push("fc-corner-right"),k=G(d.start.getDay()),m=G(d.end.getDay()-1),q=d.isStart?p(k):j,o=d.isEnd?H(m):n),h=h.concat(f.className),f.source&&(h=h.concat(f.source.className||[])),g=f.url,r=ab(f,s),l=g?l+("<a href='"+ca(g)+"'"):l+"<div",l+=" class='"+h.join(" ")+"' style='position:absolute;z-index:8;left:"+q+"px;"+r+"'><div class='fc-event-inner fc-event-skin'"+(r?" style='"+r+"'":"")+">",!f.allDay&&d.isStart&&(l+="<span class='fc-event-time'>"+ca(x(f.start,f.end,s("timeFormat")))+"</span>"), l+="<span class='fc-event-title'>"+ca(f.title)+"</span></div>",d.isEnd&&v(f)&&(l+="<div class='ui-resizable-handle ui-resizable-"+(b?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),l+="</"+(g?"a":"div")+">",d.left=q,d.outerWidth=o-q,d.startCol=k,d.endCol=m+1;return l}function c(a,b){var c,e=a.length,d,f,g;for(c=0;c<e;c++)d=a[c],f=d.event,g=h(b[c]),f=m("eventRender",f,f,g),!1===f?g.remove():(f&&!0!==f&&(f=h(f).css({position:"absolute",left:d.left}),g.replaceWith(f),g=f),d.element=g)}function b(a){var b,c=a.length, e,d,f,g,h={};for(b=0;b<c;b++)if(e=a[b],d=e.element)f=e.key=$a(d[0]),g=h[f],g===y&&(g=h[f]=Ia(d)+Ja(d)+Ka(d)),e.hsides=g}function d(a){var b,c=a.length,d,e;for(b=0;b<c;b++)if(d=a[b],e=d.element)e[0].style.width=Math.max(0,d.outerWidth-d.hsides)+"px"}function e(a){var b,c=a.length,d,e,f,g,h={};for(b=0;b<c;b++)if(d=a[b],e=d.element)f=d.key,g=h[f],g===y&&(g=h[f]=Ya(e)),d.outerHeight=e[0].offsetHeight+g}function n(){var a,b=r(),c=[];for(a=0;a<b;a++)c[a]=J(a).find("td:first div.fc-day-content > div");return c} function j(a){var b,c=a.length,d=[];for(b=0;b<c;b++)d[b]=a[b][0].offsetTop;return d}function f(a,b){var c,d=a.length,e,f;for(c=0;c<d;c++)if(e=a[c],f=e.element)f[0].style.top=b[e.row]+(e.top||0)+"px",e=e.event,m("eventAfterRender",e,e,f)}var g=this;g.renderDaySegs=function(g,h){var i=S(),m=r(),q=k(),o=0,s,t,p,v=g.length,u,w;i[0].innerHTML=a(g);c(g,i.children());t=g.length;for(s=0;s<t;s++)p=g[s],(w=p.element)&&l(p.event,w);t=g.length;var x;for(s=0;s<t;s++)if(p=g[s],w=p.element)x=p.event,x._id===h?A(x, w,p):w[0]._fci=s;Wa(i,g,A);b(g);d(g);e(g);i=n();for(s=0;s<m;s++){t=[];for(p=0;p<q;p++)t[p]=0;for(;o<v&&(u=g[o]).row==s;){p=t.slice(u.startCol,u.endCol);p=Math.max.apply(Math,p);u.top=p;p+=u.outerHeight;for(w=u.startCol;w<u.endCol;w++)t[w]=p;o++}i[s].height(Math.max.apply(Math,t))}f(g,j(i))};g.resizableDayEvent=function(i,l,p){var v=s("isRTL"),w=v?"w":"e",x=l.find("div.ui-resizable-"+w),y=!1;La(l);l.mousedown(function(a){a.preventDefault()}).click(function(a){y&&(a.preventDefault(),a.stopImmediatePropagation())}); x.mousedown(function(s){function x(a){m("eventResizeStop",this,i,a);h("body").css("cursor","");A.stop();D();P&&o(this,i,P,0,a);setTimeout(function(){y=!1},0)}if(1==s.which){y=!0;var A=g.getHoverListener(),F=r(),G=k(),H=v?-1:1,J=v?G-1:0,R=l.css("top"),P,O,W=h.extend({},i),T=Y(i.start);N();h("body").css("cursor",w+"-resize").one("mouseup",x);m("eventResizeStart",this,i,s);A.start(function(g,k){if(g){var m=Math.max(T.row,g.row),s=g.col;1==F&&(m=0);m==T.row&&(s=v?Math.min(T.col,s):Math.max(T.col,s)); P=7*m+s*H+J-(7*k.row+k.col*H+J);m=u(V(i),P,!0);if(P){W.end=m;var s=O,l=X([W]),o=p.row,r=h("<div/>"),x=S(),y=l.length,z;r[0].innerHTML=a(l);r=r.children();x.append(r);c(l,r);b(l);d(l);e(l);f(l,j(n()));r=[];for(x=0;x<y;x++)if(z=l[x].element)l[x].row===o&&z.css("top",R),r.push(z[0]);O=h(r);O.find("*").css("cursor",w+"-resize");s&&s.remove();I(i)}else O&&(q(i),O.remove(),O=null);D();E(i.start,u(t(m),1))}},s)}})};var s=g.opt,m=g.trigger,i=g.isEventDraggable,v=g.isEventResizable,V=g.eventEnd,l=g.reportEventElement, q=g.showEvents,I=g.hideEvents,o=g.eventResize,r=g.getRowCnt,k=g.getColCnt,J=g.allDayRow,w=g.allDayBounds,p=g.colContentLeft,H=g.colContentRight,G=g.dayOfWeekCol,Y=g.dateCell,X=g.compileDaySegs,S=g.getDaySegmentContainer,A=g.bindDaySeg,x=g.calendar.formatDates,E=g.renderDayOverlay,D=g.clearOverlays,N=g.clearSelection}function hb(){function a(a){g&&(g=!1,f(),e("unselect",null,a))}function c(a,b,c,d){g=!0;e("select",null,a,b,c,d)}var b=this;b.select=function(b,d,e){a();d||(d=n(b,e));j(b,d,e);c(b,d,e)}; b.unselect=a;b.reportSelection=c;b.daySelectionMousedown=function(e){var g=b.cellDate,i=b.cellIsAllDay,n=b.getHoverListener(),t=b.reportDayClick;if(1==e.which&&d("selectable")){a(e);var l;n.start(function(a,b){f();a&&i(a)?(l=[g(b),g(a)].sort(Za),j(l[0],l[1],!0)):l=null},e);h(document).one("mouseup",function(a){n.stop();l&&(+l[0]==+l[1]&&t(l[0],!0,a),c(l[0],l[1],!0,a))})}};var d=b.opt,e=b.trigger,n=b.defaultSelectionEnd,j=b.renderSelection,f=b.clearSelection,g=!1;d("selectable")&&d("unselectAuto")&& h(document).mousedown(function(b){var c=d("unselectCancel");(!c||!h(b.target).parents(c).length)&&a(b)})}function gb(){this.renderOverlay=function(b,d){var e=c.shift();e||(e=h("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));e[0].parentNode!=d[0]&&e.appendTo(d);a.push(e.css(b).show());return e};this.clearOverlays=function(){for(var b;b=a.shift();)c.push(b.hide().unbind())};var a=[],c=[]}function ib(a){var c,b;this.build=function(){c=[];b=[];a(c,b)};this.cell=function(a,e){var h= c.length,j=b.length,f,g=-1,s=-1;for(f=0;f<h;f++)if(e>=c[f][0]&&e<c[f][1]){g=f;break}for(f=0;f<j;f++)if(a>=b[f][0]&&a<b[f][1]){s=f;break}return 0<=g&&0<=s?{row:g,col:s}:null};this.rect=function(a,e,h,j,f){f=f.offset();return{top:c[a][0]-f.top,left:b[e][0]-f.left,width:b[j][1]-b[e][0],height:c[h][1]-c[a][0]}}}function jb(a){function c(b){b.pageX===y&&(b.pageX=b.originalEvent.pageX,b.pageY=b.originalEvent.pageY);b=a.cell(b.pageX,b.pageY);if(!b!=!n||b&&(b.row!=n.row||b.col!=n.col))b?(e||(e=b),d(b,e,b.row- e.row,b.col-e.col)):d(b,e),n=b}var b,d,e,n;this.start=function(j,f,g){d=j;e=n=null;a.build();c(f);b=g||"mousemove";h(document).bind(b,c)};this.stop=function(){h(document).unbind(b,c);return n}}function kb(a){var c=this,b={},d={},e={};c.left=function(c){return d[c]=d[c]===y?(b[c]=b[c]||a(c)).position().left:d[c]};c.right=function(d){return e[d]=e[d]===y?c.left(d)+(b[d]=b[d]||a(d)).width():e[d]};c.clear=function(){b={};d={};e={}}}var ta={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"", right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "), dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},Ab={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;", next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},G=h.fullCalendar={version:"1.5.3"},W=G.views={};h.fn.fullCalendar=function(a){if("string"==typeof a){var c=Array.prototype.slice.call(arguments,1),b;this.each(function(){var d=h.data(this,"fullCalendar");d&&h.isFunction(d[a])&&(d=d[a].apply(d,c),b===y&&(b=d),"destroy"==a&&h.removeData(this,"fullCalendar"))});return b!==y?b:this}var d=a.eventSources|| [];delete a.eventSources;a.events&&(d.push(a.events),delete a.events);a=h.extend(!0,{},ta,a.isRTL||a.isRTL===y&&ta.isRTL?Ab:{},a);this.each(function(b,c){var j=h(c),f=new ob(j,a,d);j.data("fullCalendar",f);f.render()});return this};G.sourceNormalizers=[];G.sourceFetchers=[];var rb={dataType:"json",cache:!1},sb=1;G.addDays=u;G.cloneDate=t;G.parseDate=Da;G.parseISO8601=Va;G.parseTime=Fa;G.formatDate=ba;G.formatDates=Ba;var wb="sun mon tue wed thu fri sat".split(" "),Ua=864E5,tb=36E5,zb=6E4,ub={s:function(a){return a.getSeconds()}, ss:function(a){return O(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return O(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return O(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return O(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return O(a.getDate())},ddd:function(a,c){return c.dayNamesShort[a.getDay()]},dddd:function(a,c){return c.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return O(a.getMonth()+ 1)},MMM:function(a,c){return c.monthNamesShort[a.getMonth()]},MMMM:function(a,c){return c.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return 12>a.getHours()?"a":"p"},tt:function(a){return 12>a.getHours()?"am":"pm"},T:function(a){return 12>a.getHours()?"A":"P"},TT:function(a){return 12>a.getHours()?"AM":"PM"},u:function(a){return ba(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();return 10<a&&20> a?"th":["st","nd","rd"][a%10-1]||"th"}};G.applyAll=va;W.month=function(a,c){var b=this;b.render=function(a,c){c&&(Aa(a,c),a.setDate(1));var g=t(a,!0);g.setDate(1);var s=Aa(t(g),1),m=t(g),i=t(s),v=d("firstDay"),y=d("weekends")?0:1;y&&(Y(m),Y(i,-1,!0));u(m,-((m.getDay()-Math.max(v,y)+7)%7));u(i,(7-i.getDay()+Math.max(v,y))%7);v=Math.round((i-m)/(7*Ua));"fixed"==d("weekMode")&&(u(i,7*(6-v)),v=6);b.title=h(g,d("titleFormat"));b.start=g;b.end=s;b.visStart=m;b.visEnd=i;e(6,v,y?5:7,!0)};Na.call(b,a,c,"month"); var d=b.opt,e=b.renderBasic,h=c.formatDate};W.basicWeek=function(a,c){var b=this;b.render=function(a,c){c&&u(a,7*c);var g=u(t(a),-((a.getDay()-d("firstDay")+7)%7)),s=u(t(g),7),m=t(g),i=t(s),v=d("weekends");v||(Y(m),Y(i,-1,!0));b.title=h(m,u(t(i),-1),d("titleFormat"));b.start=g;b.end=s;b.visStart=m;b.visEnd=i;e(1,1,v?7:5,!1)};Na.call(b,a,c,"basicWeek");var d=b.opt,e=b.renderBasic,h=c.formatDates};W.basicDay=function(a,c){var b=this;b.render=function(a,c){c&&(u(a,c),d("weekends")||Y(a,0>c?-1:1));b.title= h(a,d("titleFormat"));b.start=b.visStart=t(a,!0);b.end=b.visEnd=u(t(b.start),1);e(1,1,1,!1)};Na.call(b,a,c,"basicDay");var d=b.opt,e=b.renderBasic,h=c.formatDate};Qa({weekMode:"fixed"});W.agendaWeek=function(a,c){var b=this;b.render=function(a,c){c&&u(a,7*c);var g=u(t(a),-((a.getDay()-d("firstDay")+7)%7)),s=u(t(g),7),m=t(g),i=t(s),v=d("weekends");v||(Y(m),Y(i,-1,!0));b.title=h(m,u(t(i),-1),d("titleFormat"));b.start=g;b.end=s;b.visStart=m;b.visEnd=i;e(v?7:5)};mb.call(b,a,c,"agendaWeek");var d=b.opt, e=b.renderAgenda,h=c.formatDates};W.agendaDay=function(a,c){var b=this;b.render=function(a,c){c&&(u(a,c),d("weekends")||Y(a,0>c?-1:1));var g=t(a,!0),s=u(t(g),1);b.title=h(a,d("titleFormat"));b.start=b.visStart=g;b.end=b.visEnd=s;e(1)};mb.call(b,a,c,"agendaDay");var d=b.opt,e=b.renderAgenda,h=c.formatDate};Qa({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24})})(jQuery);